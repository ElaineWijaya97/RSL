<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Inventaris</title>
  <link rel="stylesheet" href="style.css" />

  <!-- Flatpickr CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <img src="Leo Internasional Logo.jpg" alt="Leo Internasional Logo" class="site-logo" />
      <h1>Inventaris</h1>
    </header>

    <div class="controls">
      <input id="search" class="search-bar" placeholder="Cari..." />
      <button id="addCategoryBtn" class="btn primary">+ Tambah Kategori</button>
    </div>

    <main>
      <div id="categories"></div>
    </main>
  </div>

  <!-- LOG MODAL -->
  <div id="logModal" class="modal hidden" aria-hidden="true">
    <div class="modal-card">
      <h3 id="logTitle">Tambah / Kurangi</h3>

      <label for="logDate">Tanggal (wajib)</label>
      <input id="logDate" type="text" placeholder="dd/mm/yyyy" />

      <label for="logQty">Jumlah</label>
      <input id="logQty" type="number" min="1" value="1" />

      <label for="logExpiry">Tanggal Kadaluarsa (opsional)</label>
      <input id="logExpiry" type="text" placeholder="dd/mm/yyyy" />

      <label for="logPhoto">Bukti Foto</label>
      <input id="logPhoto" type="file" accept="image/*" />

      <div class="modal-actions">
        <button id="saveLogBtn" class="btn primary">Simpan</button>
        <button id="cancelLogBtn" class="btn">Batal</button>
      </div>
    </div>
  </div>

  <!-- ADMIN LOGIN MODAL (FIXED: now INSIDE body + hidden) -->
  <div id="loginModal" class="modal hidden">
    <div class="modal-card">
      <h3>Admin Login</h3>

      <label for="adminPass">Password</label>
      <input id="adminPass" type="password" placeholder="Enter admin password" autocomplete="off" />

      <div class="modal-actions">
        <button id="loginBtn" type="button" class="btn primary" onclick="window.handleLoginClick && window.handleLoginClick(event)">Login</button>
      </div>
    </div>
  </div>

  <!-- Firebase Config - REPLACE WITH YOUR OWN CONFIG -->
  <script>
    // Initialize Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyCdHMitORhEiSdFqSVLplMx-QWxSGY1TvE",
      authDomain: "rsl-inventaris.firebaseapp.com",
      projectId: "rsl-inventaris",
      // NOTE: storageBucket should usually end with .appspot.com
      storageBucket: "rsl-inventaris.appspot.com",
      messagingSenderId: "1055201945452",
      appId: "1:1055201945452:web:60857ac8afc11557383549",
      measurementId: "G-57P2E75ZC8"
    };
    
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    console.log("[Firebase] Initialized", {
      hasFirebase: typeof firebase !== "undefined",
      projectId: firebaseConfig.projectId
    });
  </script>

  <!-- Override default browser popups so "â€¦says" dialog does not appear -->
  <script>
    window.alert = function(message) {
      console.log('[Alert]', message);
    };
    window.confirm = function(message) {
      console.log('[Confirm]', message);
      return true;
    };
    window.prompt = function(message, defaultValue) {
      console.log('[Prompt]', message);
      return defaultValue || '';
    };
  </script>

  <script src="script.js"></script>

  <!-- Flatpickr JS -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script>
    flatpickr("#logDate", {
      dateFormat: "d/m/Y",
      allowInput: true
    });
    flatpickr("#logExpiry", {
      dateFormat: "d/m/Y",
      allowInput: true
    });
  </script>
</body>
</html>